@model SignaturePDF.Models.Document

<!DOCTYPE html>
<html>
<head>
    <title>Display PDF</title>
    <!-- Include PDF.js scripts and styles -->
    <style type="text/css">
        /* Add your styles for the viewer container if needed */
        #pdf-viewer {
            width: 100%;
            height: 500px; /* Adjust height as needed */
        }
    </style>
    <script type="text/javascript" src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
</head>
<body>

    <div id="pdf-viewer"></div>

    <script type="text/javascript">
        // Get the base64-encoded PDF data from the ViewBag
        var base64Data = "@ViewBag.fileBytes";

        // Decode the base64 data
        var binaryData = window.atob(base64Data);

        // Convert the binary data to a Uint8Array
        var byteArray = new Uint8Array(binaryData.length);
        for (var i = 0; i < binaryData.length; i++) {
            byteArray[i] = binaryData.charCodeAt(i);
        }

        // Load the PDF using PDF.js
        var pdfData = new Uint8Array(byteArray);
        var loadingTask = pdfjsLib.getDocument({ data: pdfData });

        loadingTask.promise.then(function(pdf) {
            // PDF loaded successfully, render it to the viewer
            pdf.getPage(1).then(function(page) {
                var canvas = document.createElement('canvas');
                var context = canvas.getContext('2d');
                var viewport = page.getViewport({ scale: 1.5 }); // Adjust scale as needed

                canvas.height = viewport.height;
                canvas.width = viewport.width;

                var renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };

                page.render(renderContext);
                document.getElementById('pdf-viewer').appendChild(canvas);
            });
        });
    </script>

</body>
</html>
